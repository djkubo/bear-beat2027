# ===========================================
# BEAR BEAT – Variables de entorno
# Copia a .env.local y rellena valores.
# En producción (Render) configurar las mismas en Environment.
# ===========================================

# ---- APP ----
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_APP_NAME=Bear Beat

# ---- SUPABASE (obligatorio) ----
NEXT_PUBLIC_SUPABASE_URL=https://TU-PROYECTO.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6...
# Para configurar Site URL + Redirect URLs por script (npm run supabase:set-auth-urls):
# SUPABASE_ACCESS_TOKEN=sbp_xxx  (crear en https://supabase.com/dashboard/account/tokens)
# Para scripts (db:setup, sync-videos): conexión directa PostgreSQL
DATABASE_URL=postgresql://postgres.[ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# ---- STRIPE (obligatorio para pagos) ----
# Para pruebas: usa claves de test (pk_test_, sk_test_) y webhook en modo Test.
NEXT_PUBLIC_STRIPE_PUBLIC_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# ---- RENDER (solo para npm run deploy:env) ----
# RENDER_API_KEY=rnd_xxx
# RENDER_SERVICE_ID=srv_xxx

# ---- FIX ADMIN (SOLO desarrollo/staging) ----
# NO configurar en producción: /fix-admin devuelve 404 en NODE_ENV=production.
# En staging: FIX_ADMIN_SECRET=valor-secreto para /fix-admin?token=valor-secreto
# FIX_ADMIN_SECRET=bearbeat-admin-2027-secreto

# ---- PUSH NOTIFICATIONS (admin /api/push/send) ----
# Generar: npx web-push generate-vapid-keys
NEXT_PUBLIC_VAPID_PUBLIC_KEY=
VAPID_PRIVATE_KEY=
VAPID_EMAIL=mailto:soporte@bearbeat.mx

# ---- META / FACEBOOK (Pixel + CAPI) ----
NEXT_PUBLIC_META_PIXEL_ID=
FACEBOOK_CAPI_ACCESS_TOKEN=

# ---- CONTACTO (número real para wa.me y soporte) ----
# WhatsApp soporte: código país + número sin espacios (ej. México 5215512345678).
# Si no se define, se usa un número de ejemplo solo para desarrollo.
NEXT_PUBLIC_WHATSAPP_NUMBER=5215512345678

# ---- MANYCHAT (WhatsApp / Messenger) ----
NEXT_PUBLIC_MANYCHAT_PAGE_ID=
MANYCHAT_API_KEY=

# ---- MICROSOFT CLARITY (mapas de calor + grabación de sesiones, gratis) ----
# Crear proyecto en https://clarity.microsoft.com y pegar el Project ID
# NEXT_PUBLIC_CLARITY_PROJECT_ID=

# ---- TWILIO (SMS + WhatsApp + Verify OTP) ----
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
# Verify API (recomendado): Service SID de Twilio Verify (VA...) para OTP en registro.
# Si está configurado, /api/verify-phone usa Verify API (SMS o WhatsApp). Si no, fallback a código en memoria + send-sms.
TWILIO_VERIFY_SERVICE_SID=
# Para fallback sin Verify: número desde el que se envía SMS
TWILIO_PHONE_NUMBER=
TWILIO_WHATSAPP_NUMBER=whatsapp:+52...
# Código provisional para entrar sin SMS (solo pruebas): en desarrollo se acepta 111111; en producción solo si defines:
# DEV_OTP_BYPASS_CODE=111111

# ---- RESEND (emails, opcional) ----
RESEND_API_KEY=re_...

# ---- BUNNY (storage / CDN — demos, portadas, descargas, listado por carpeta) ----
# Ver docs/BUNNY_HETZNER_INTEGRACION.md para qué variable usa cada funcionalidad.
# Si están configurados, /api/download redirige a URL firmada de Bunny (no disco).
BUNNY_API_KEY=
BUNNY_STORAGE_ZONE=bear-beat
BUNNY_STORAGE_PASSWORD=
BUNNY_CDN_URL=https://bear-beat.b-cdn.net
# URL pública del CDN para demos (frontend apunta directo aquí → evita 503 en Next.js).
# Sin barra final. Ej: https://tu-zona.b-cdn.net
NEXT_PUBLIC_BUNNY_CDN_URL=https://bear-beat.b-cdn.net
BUNNY_TOKEN_KEY=
# Prefijo de carpetas en Bunny (ej. packs/enero-2026). El path del archivo es Genre/filename.mp4
BUNNY_PACK_PATH_PREFIX=packs/enero-2026
# Token Auth para descargas: Pull Zone hostname (ej. cdn.bearbeat.mx) y clave de firma de URLs
BUNNY_PULL_ZONE=cdn.bearbeat.mx
BUNNY_SECURITY_KEY=
BUNNY_STREAM_LIBRARY_ID=
BUNNY_STREAM_API_KEY=

# ---- VIDEOS (solo desarrollo con carpeta local) ----
# VIDEOS_PATH=./ruta/a/carpeta/videos
# USE_VIDEOS_FROM_DB=true  → en producción se usa Supabase

# ---- FTP HETZNER (para listar videos y llenar catálogo en Supabase) ----
# Necesario para npm run db:sync-videos-ftp (videos en Hetzner, listado en la web)
# FTP_HOST=ftp.tudominio.com
# FTP_USER=usuario_lectura
# FTP_PASSWORD=contraseña
# O: HETZNER_FTP_HOST, HETZNER_FTP_USER, HETZNER_FTP_PASSWORD

# ---- HETZNER ROBOT API (crear subcuenta FTP por compra - opcional) ----
# Si están configuradas, al completar compra se crea una subcuenta real en el Storage Box (solo lectura).
# HETZNER_ROBOT_USER=#ws+xxxxx
# HETZNER_ROBOT_PASSWORD=contraseña_del_webservice
# HETZNER_STORAGEBOX_ID=540473
# Host público del Storage Box (ej. u540473.your-storagebox.de). Para subcuentas el host es {username}.your-storagebox.de
# NEXT_PUBLIC_FTP_HOST=u540473.your-storagebox.de

# ---- OPENAI (chat BearBot, RAG, analyze-chat, feed-brain, sync-knowledge) ----
# Crear API key en https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-...
# Modelo de chat: GPT-5.2 (docs: https://platform.openai.com/docs/models/gpt-5.2)
OPENAI_CHAT_MODEL=gpt-5.2

# ---- OPCIONAL: PayPal, Conekta, Cloudflare R2 ----
# Para pruebas (sandbox): app Sandbox en developer.paypal.com + estas variables.
# NEXT_PUBLIC_PAYPAL_CLIENT_ID=   (Client ID de la app Sandbox)
# PAYPAL_CLIENT_SECRET=           (Secret de la app Sandbox)
# PAYPAL_USE_SANDBOX=true         (Backend usa API Sandbox)
# NEXT_PUBLIC_PAYPAL_USE_SANDBOX=true   (Frontend muestra banner "Modo pruebas" en checkout)
# NEXT_PUBLIC_CONEKTA_PUBLIC_KEY=
# CONEKTA_PRIVATE_KEY=
# R2_ACCOUNT_ID=
# R2_ACCESS_KEY_ID=
# R2_SECRET_ACCESS_KEY=
# R2_BUCKET_NAME=
